{{ define "main" }}
<article class="project-detail">
    <div class="container-narrow">
        <header class="project-detail-header">
            {{ if .Params.logo }}
            <div class="project-detail-logo">
                <img src="{{ .Params.logo }}" alt="{{ .Title }} logo">
            </div>
            {{ end }}
            <h1>{{ .Title }}</h1>
            {{ if .Params.description }}
            <p class="section-subtitle">{{ .Params.description }}</p>
            {{ end }}
        </header>

        {{ if .Params.health }}
        <div class="health-dashboard">
            <div class="health-score-display">
                <div class="health-score-number {{ if ge .Params.health.score 80 }}healthy{{ else if ge .Params.health.score 60 }}warning{{ else }}critical{{ end }}">
                    {{ .Params.health.score }}
                </div>
                <div class="health-score-label">
                    {{ if ge .Params.health.score 80 }}âœ… Project is healthy{{ else if ge .Params.health.score 60 }}âš ï¸ Needs attention{{ else }}ğŸš¨ Critical - needs support{{ end }}
                </div>
            </div>

            <div class="health-dimensions">
                <div class="health-dimension {{ if eq .Params.health.funding "stable" }}good{{ else if eq .Params.health.funding "at-risk" }}warning{{ else }}critical{{ end }}">
                    <div class="dimension-icon">ğŸ’°</div>
                    <div class="dimension-name">Funding</div>
                    <div class="dimension-value {{ if eq .Params.health.funding "stable" }}healthy{{ else if eq .Params.health.funding "at-risk" }}warning{{ else }}critical{{ end }}">
                        {{ .Params.health.funding | humanize }}
                    </div>
                </div>

                <div class="health-dimension {{ if eq .Params.health.maintenance "active" }}good{{ else if eq .Params.health.maintenance "moderate" }}warning{{ else }}critical{{ end }}">
                    <div class="dimension-icon">ğŸ”§</div>
                    <div class="dimension-name">Maintenance</div>
                    <div class="dimension-value {{ if eq .Params.health.maintenance "active" }}healthy{{ else if eq .Params.health.maintenance "moderate" }}warning{{ else }}critical{{ end }}">
                        {{ .Params.health.maintenance | humanize }}
                    </div>
                </div>

                <div class="health-dimension {{ if eq .Params.health.contributors "healthy" }}good{{ else if eq .Params.health.contributors "declining" }}warning{{ else }}critical{{ end }}">
                    <div class="dimension-icon">ğŸ‘¥</div>
                    <div class="dimension-name">Contributors</div>
                    <div class="dimension-value {{ if eq .Params.health.contributors "healthy" }}healthy{{ else if eq .Params.health.contributors "declining" }}warning{{ else }}critical{{ end }}">
                        {{ .Params.health.contributors | humanize }}
                    </div>
                </div>

                <div class="health-dimension {{ if eq .Params.health.bus_factor "low" }}good{{ else if eq .Params.health.bus_factor "medium" }}warning{{ else }}critical{{ end }}">
                    <div class="dimension-icon">ğŸšŒ</div>
                    <div class="dimension-name">Bus Factor</div>
                    <div class="dimension-value {{ if eq .Params.health.bus_factor "low" }}healthy{{ else if eq .Params.health.bus_factor "medium" }}warning{{ else }}critical{{ end }}">
                        {{ .Params.health.bus_factor | humanize }} risk
                    </div>
                </div>
            </div>

            {{ if lt .Params.health.score 60 }}
            <div class="alert-critical" style="margin-top: 24px;">
                <div class="alert-icon">ğŸ†˜</div>
                <div class="alert-content">
                    <strong>This project needs your help!</strong>
                    Consider contributing code, documentation, or funding to help maintain this critical infrastructure.
                </div>
            </div>
            {{ end }}
        </div>
        {{ end }}

        <div class="content-wrapper">
            {{ .Content }}
        </div>

        {{ partial "dependency-map.html" . }}
        
        <div style="text-align: center; margin-top: 48px;">
            <a href="/projects/" class="btn btn-secondary">â† Back to all projects</a>
        </div>
    </div>
</article>
{{ end }}
