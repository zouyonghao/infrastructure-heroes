{{ define "main" }}
<article class="project-detail">
    <div class="container">
        <header class="project-header">
            {{ if .Params.logo }}
            <div class="project-logo-large">
                <img src="{{ .Params.logo }}" alt="{{ .Title }} logo">
            </div>
            {{ end }}
            <h1>{{ .Title }}</h1>
        </header>

        {{ if .Params.health }}
        <div class="health-details">
            <h3>ğŸ“Š Project Health Dashboard</h3>
            
            <div class="health-score-large">
                <span class="score-number {{ if ge .Params.health.score 80 }}healthy{{ else if ge .Params.health.score 60 }}warning{{ else }}critical{{ end }}">
                    {{ .Params.health.score }}
                </span>
                <span class="score-total">/ 100</span>
                <span class="score-status">
                    {{ if ge .Params.health.score 80 }}âœ… Healthy{{ else if ge .Params.health.score 60 }}âš ï¸ Needs Attention{{ else }}ğŸš¨ Critical{{ end }}
                </span>
            </div>

            <div class="health-grid">
                <div class="health-item funding">
                    <div class="health-item-label">ğŸ’° Funding</div>
                    <div class="health-item-value {{ .Params.health.funding }}">
                        {{ .Params.health.funding | humanize }}
                    </div>
                    <p class="health-item-desc">
                        {{ if eq .Params.health.funding "stable" }}Project has sustainable funding sources{{ end }}
                        {{ if eq .Params.health.funding "at-risk" }}Funding sources are uncertain{{ end }}
                        {{ if eq .Params.health.funding "critical" }}Urgent need for funding support{{ end }}
                    </p>
                </div>

                <div class="health-item maintenance">
                    <div class="health-item-label">ğŸ”§ Maintenance</div>
                    <div class="health-item-value {{ .Params.health.maintenance }}">
                        {{ .Params.health.maintenance | humanize }}
                    </div>
                    <p class="health-item-desc">
                        {{ if eq .Params.health.maintenance "active" }}Regular updates and bug fixes{{ end }}
                        {{ if eq .Params.health.maintenance "moderate" }}Sporadic maintenance activity{{ end }}
                        {{ if eq .Params.health.maintenance "inactive" }}Little to no recent activity{{ end }}
                    </p>
                </div>

                <div class="health-item contributors">
                    <div class="health-item-label">ğŸ‘¥ Contributors</div>
                    <div class="health-item-value {{ .Params.health.contributors }}">
                        {{ .Params.health.contributors | humanize }}
                    </div>
                    <p class="health-item-desc">
                        {{ if eq .Params.health.contributors "healthy" }}Active and diverse contributor base{{ end }}
                        {{ if eq .Params.health.contributors "declining" }}Contributor numbers decreasing{{ end }}
                        {{ if eq .Params.health.contributors "critical" }}Very few active contributors{{ end }}
                    </p>
                </div>

                <div class="health-item bus_factor">
                    <div class="health-item-label">ğŸšŒ Bus Factor</div>
                    <div class="health-item-value {{ .Params.health.bus_factor }}">
                        {{ .Params.health.bus_factor | humanize }} risk
                    </div>
                    <p class="health-item-desc">
                        {{ if eq .Params.health.bus_factor "low" }}Knowledge well distributed{{ end }}
                        {{ if eq .Params.health.bus_factor "medium" }}Some key person dependencies{{ end }}
                        {{ if eq .Params.health.bus_factor "high" }}Heavy reliance on 1-2 people{{ end }}
                    </p>
                </div>
            </div>

            <div class="health-legend">
                <strong>Legend:</strong>
                <code>ğŸ’° Funding</code> - Financial sustainability
                <code>ğŸ”§ Maintenance</code> - Code maintenance activity
                <code>ğŸ‘¥ Contributors</code> - Community health
                <code>ğŸšŒ Bus Factor</code> - Key person risk
            </div>

            {{ if lt .Params.health.score 60 }}
            <div class="health-alert">
                <strong>âš ï¸ This project needs support!</strong>
                <p>Consider contributing code, documentation, testing, or funding to help keep this critical infrastructure healthy.</p>
            </div>
            {{ end }}
        </div>
        {{ end }}

        <div class="project-content-detail">
            {{ .Content }}
        </div>

        {{ partial "dependency-map.html" . }}
    </div>
</article>
{{ end }}
